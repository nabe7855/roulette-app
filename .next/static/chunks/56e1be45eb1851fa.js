(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,l)=>{t.exports=e.r(76562)},52683,e=>{"use strict";var t,l=e.i(43476),s=e.i(71645),r=e.i(18566),a=((t={}).Roulette="roulette",t.Slot="slot",t);let n=["あなたの最大の短所は何ですか？","困難な課題に直面した時のことを教えてください。","5年後の自分はどうなっていると思いますか？","なぜここで働きたいのですか？","あなたが情熱を注いでいることは何ですか？","あなたの理想的な職場環境について説明してください。","ストレスやプレッシャーにどう対処しますか？","あなたの最大の功績は何ですか？","何かの決定に同意できなかった時のことを教えてください。","あなたのモチベーションの源泉は何ですか？","どのように管理されるのが好きですか？","最近読んだ本は何ですか？","もしスーパーパワーを持てるとしたら、何を選びますか？","あなたの好きな趣味は何ですか？","自分を3つの言葉で説明してください。","どのようにして整理整頓をしていますか？","楽しみのために何をしますか？","失敗した時のことを教えてください。","あなたのキャリアの目標は何ですか？"],o=["#fecaca","#fed7aa","#fef08a","#d9f99d","#a7f3d0","#bae6fd","#bfdbfe","#ddd6fe","#fbcfe8"],i=function(e,t){let[l,r]=(0,s.useState)(t);return(0,s.useEffect)(()=>{try{let t=window.localStorage.getItem(e);t&&r(JSON.parse(t))}catch(e){console.error("useLocalStorage load error:",e)}},[e]),[l,t=>{try{let s=t instanceof Function?t(l):t;r(s),window.localStorage.setItem(e,JSON.stringify(s))}catch(e){console.error("useLocalStorage setValue error:",e)}}]},d=({mode:e,onToggle:t})=>{let s=e===a.Roulette;return(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsx)("span",{className:`font-bold transition-colors ${!s?"text-blue-600":"text-gray-400"}`,children:"スロット"}),(0,l.jsx)("button",{onClick:t,className:`relative inline-flex items-center h-7 rounded-full w-12 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-blue-500 ${s?"bg-pink-400":"bg-blue-400"}`,"aria-label":"Toggle mode",onKeyDown:e=>{"Tab"===e.key&&(e.preventDefault(),t())},children:(0,l.jsx)("span",{className:`inline-block w-5 h-5 transform bg-white rounded-full transition-transform ease-in-out duration-200 ${s?"translate-x-6":"translate-x-1"}`})}),(0,l.jsx)("span",{className:`font-bold transition-colors ${s?"text-pink-600":"text-gray-400"}`,children:"ルーレット"})]})},c=({questions:e,isSpinning:t,targetQuestion:r})=>{let[a,n]=(0,s.useState)(0),i=e.length||1,d=360/i;(0,s.useEffect)(()=>{if(null===r)return void n(0);let t=e.indexOf(r);if(-1===t)return void console.error("Target question not found in display list.");let l=(Math.floor(a/360)+5)*360+-(t*d);l<a&&(l+=360),n(l)},[r]);let c=`conic-gradient(from ${-d/2}deg, ${e.map((e,t)=>`${o[t%o.length]} ${t*d}deg, ${o[t%o.length]} ${(t+1)*d}deg`).join(", ")})`;return(0,l.jsxs)("div",{className:"relative w-80 h-80 md:w-96 md:h-96 flex items-center justify-center",children:[(0,l.jsx)("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 z-20",style:{width:0,height:0,borderLeft:"15px solid transparent",borderRight:"15px solid transparent",borderTop:"25px solid #ef4444"}}),(0,l.jsxs)("div",{className:"relative w-full h-full",style:{transform:`rotate(${a}deg)`,transition:t?"transform 5s cubic-bezier(0.25, 0.1, 0.25, 1)":"none"},children:[(0,l.jsx)("div",{className:"absolute inset-0 rounded-full",style:{background:c,boxShadow:"0 4px 12px rgba(0,0,0,0.1)"}}),e.map((e,t)=>{let s=360*t/i;return(0,l.jsx)("div",{className:"absolute top-1/2 left-1/2 origin-[0_0] h-[95px] md:h-[120px] w-[40px] md:w-[50px] flex items-center justify-center",style:{transform:`rotate(${s+d/2}deg) translate(65px) rotate(-90deg)`},children:(0,l.jsx)("span",{className:"text-gray-800 text-xs md:text-sm font-semibold",style:{writingMode:"vertical-rl",textOrientation:"mixed",whiteSpace:"normal",lineHeight:"1.3"},children:e})},t)})]}),(0,l.jsxs)("div",{className:"absolute w-24 h-24 md:w-32 md:h-32 bg-gray-100 rounded-full flex items-center justify-center text-center p-2 shadow-inner",children:[(0,l.jsx)("div",{className:"absolute inset-0 rounded-full border-2 md:border-4 border-gray-200"}),(0,l.jsxs)("div",{className:"z-10 text-center",children:[(0,l.jsx)("span",{className:"text-3xl",role:"img","aria-label":"roulette wheel",children:"🎡"}),(0,l.jsx)("p",{className:"text-gray-500 font-semibold mt-1 text-xs md:text-sm",children:"スタートしてね！"})]})]})]})},u=({questions:e,isSpinning:t,selectedQuestion:r,onStart:a,disabled:n})=>{let o=(0,s.useRef)(null),[i,d]=(0,s.useState)(0),[c,u]=(0,s.useState)([]),x=(0,s.useRef)([]),[m,f]=(0,s.useState)(!1);(0,s.useEffect)(()=>{if(t){let t=[,,,,,].fill([...e].sort(()=>Math.random()-.5)).flat();x.current=t,u(t),requestAnimationFrame(()=>{d(-((t.length-5)*64))})}else if(r){let t=x.current;if(t.length>0){let l=e.length,s=t.indexOf(r,2*l);-1===s&&(s=t.indexOf(r)),-1===s?(console.error("Selected question not found in animation list. Displaying directly."),u([r]),d(0)):d(-(64*s))}else u([r]),d(0)}},[t,r,e,64]);let h=!t&&!r;return(0,l.jsxs)("div",{className:"w-full max-w-lg flex items-center justify-center gap-4",children:[(0,l.jsx)("div",{className:"w-full max-w-md h-64 md:h-80 flex flex-col items-center justify-center",children:(0,l.jsxs)("div",{ref:o,className:"relative w-full h-16 bg-white rounded-lg border-4 border-blue-400 overflow-hidden shadow-lg flex items-center justify-center",children:[h?(0,l.jsxs)("div",{className:"text-center animate-fade-in",children:[(0,l.jsx)("span",{className:"text-3xl",role:"img","aria-label":"slot machine",children:"🎰"}),(0,l.jsx)("p",{className:"text-gray-500 font-semibold mt-1 text-xs md:text-sm",children:"スタートしてね！"})]}):(0,l.jsx)("div",{className:"absolute w-full",style:{transform:`translateY(${i}px)`,transition:t?"transform 5s cubic-bezier(0.25, 0.1, 0.25, 1)":"transform 0.5s ease-out"},children:c.map((e,t)=>(0,l.jsx)("div",{className:"h-16 flex items-center justify-center text-center p-2 text-md md:text-lg font-semibold text-gray-700",children:e},t))}),(0,l.jsx)("div",{className:"absolute inset-0 pointer-events-none",style:{background:"linear-gradient(to bottom, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 0) 30%, rgba(255, 255, 255, 0) 70%, rgba(255, 255, 255, 1) 100%)"}})]})}),(0,l.jsx)("div",{className:"flex-shrink-0 h-48 flex flex-col items-center",children:(0,l.jsx)("div",{className:"w-8 h-full bg-gray-300 rounded-t-lg relative",children:(0,l.jsx)("div",{onClick:()=>{n||(f(!0),a(),setTimeout(()=>{f(!1)},300))},className:`absolute -top-2 left-1/2 -translate-x-1/2 w-3 h-36 bg-gray-500 border-2 border-gray-600 rounded-full cursor-pointer transition-transform duration-200 ease-out ${n?"opacity-50 cursor-not-allowed":"hover:bg-gray-400"} ${m?"translate-y-8":""}`,style:{transformOrigin:"top center"},children:(0,l.jsx)("div",{className:"absolute -top-4 -left-2.5 w-8 h-8 bg-red-500 rounded-full border-2 border-red-700 shadow-md"})})})})]})},x=({className:e})=>(0,l.jsxs)("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.24-.438.613-.43.992a6.759 6.759 0 0 1 0 1.905c-.008.379.137.752.43.992l1.004.827a1.125 1.125 0 0 1 .26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.333.183-.582.495-.644.869l-.213 1.28c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.759 6.759 0 0 1 0-1.905c.008-.379-.137-.752-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.49l1.217.456c.355.133.75.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281Z"}),(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]}),m=({isOpen:e,question:t,onClose:s})=>e&&t?(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center z-50 animate-fade-in",children:(0,l.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-sm w-full text-center transform transition-all duration-500 scale-100 animate-rise",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"🎯 結果！"}),(0,l.jsx)("p",{className:"text-lg font-medium text-gray-700 mb-6",children:t}),(0,l.jsx)("button",{onClick:s,className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-full transition-all shadow-md hover:shadow-lg",children:"OK"})]})}):null;function f(){let e=(0,r.useRouter)(),[t,o]=i("app-mode",a.Roulette),[f]=i("questions",n),[h,g]=i("asked-indexes",[]),[b,p]=(0,s.useState)(!1),[j,w]=(0,s.useState)(null),[y,v]=(0,s.useState)([]),[N,k]=(0,s.useState)(null),[S,$]=(0,s.useState)(!1),q=(0,s.useCallback)(()=>f.map((e,t)=>({question:e,index:t})).filter(e=>!h.includes(e.index)),[f,h]),R=()=>{if(b)return;let e=q();if(0===e.length)return void alert("すべての質問が出題されました！「クリア」ボタンでリセットしてください。");p(!0),w(null);let t=e[Math.floor(Math.random()*e.length)],l=[...e],s=[t.question];for(;s.length<10&&l.length>0;){let e=Math.floor(Math.random()*l.length),t=l[e];t&&!s.includes(t.question)&&s.push(t.question),l.splice(e,1)}let r=s.sort(()=>Math.random()-.5);v(r),k(t.question),setTimeout(()=>{let e=r[0]||t.question,l=f.findIndex(t=>t===e);w(e),g(e=>[...e,l]),p(!1),$(!0)},5e3)},C=(0,s.useCallback)(()=>{o(e=>e===a.Roulette?a.Slot:a.Roulette)},[o]);(0,s.useEffect)(()=>{let e=e=>{"Tab"===e.key&&(e.preventDefault(),C())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[C]),(0,s.useEffect)(()=>{let e=[...q().map(e=>e.question)].sort(()=>.5-Math.random()).slice(0,10);Promise.resolve().then(()=>{v(e)})},[f,q]);let T=q().length,M=f.length;return(0,l.jsxs)("div",{className:"min-h-screen bg-gray-100 text-gray-800 flex flex-col items-center justify-center p-4 font-sans relative",children:[(0,l.jsx)("div",{className:"absolute top-4 right-4",children:(0,l.jsx)("button",{onClick:()=>e.push("/admin"),disabled:b,className:"text-gray-500 hover:text-blue-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:(0,l.jsx)(x,{className:"w-8 h-8"})})}),(0,l.jsxs)("header",{className:"text-center mb-8",children:[(0,l.jsxs)("h1",{className:"text-4xl md:text-5xl font-bold text-gray-800",children:["質問",t===a.Roulette?"ルーレット":"スロット"]}),(0,l.jsx)("p",{className:"text-gray-500 mt-2",children:"自己PRの練習や会話のきっかけ作りに！"})]}),(0,l.jsx)("main",{className:"flex-grow flex flex-col items-center justify-center w-full",children:t===a.Roulette?(0,l.jsx)(c,{questions:y,isSpinning:b,targetQuestion:N}):(0,l.jsx)(u,{questions:f,isSpinning:b,selectedQuestion:j,onStart:R,disabled:b||0===T})}),(0,l.jsxs)("footer",{className:"w-full max-w-lg mt-8",children:[(0,l.jsx)("div",{className:"flex items-center justify-center mb-6",children:(0,l.jsx)(d,{mode:t,onToggle:C})}),(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,l.jsx)("button",{onClick:R,disabled:b||0===T,className:"w-full bg-green-500 hover:bg-green-600 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-bold py-3 px-6 rounded-lg text-lg transition-all duration-300 transform hover:scale-105 shadow-lg shadow-green-500/30",children:b?"回転中...":"スタート"}),(0,l.jsx)("button",{onClick:()=>{g([]),w(null),k(null),alert("履歴がクリアされました。新しいセッションを開始できます。")},disabled:b,className:"w-full bg-gray-300 hover:bg-gray-400 disabled:opacity-50 text-gray-800 font-bold py-3 px-6 rounded-lg text-lg transition-colors",children:"履歴をクリア"})]}),(0,l.jsxs)("p",{className:"text-center mt-4 text-gray-500 font-medium",children:["残り ",T," / ",M," 問"]})]}),(0,l.jsx)(m,{isOpen:S,question:j,onClose:()=>$(!1)})]})}e.s(["default",()=>f],52683)}]);